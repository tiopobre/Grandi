{"version":3,"file":"static/webpack/static\\development\\pages\\perfil.js.2e0738eb57f5c0bd36fa.hot-update.js","sources":["webpack:///./pages/perfil.jsx"],"sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\r\nimport Layaout from '../components/Layaout/layaout'\r\nimport CardCultivo from '../components/Dinamicos/cardCultivo'\r\n\r\nimport dynamic from \"next/dynamic\";\r\nimport Router ,{useRouter} from 'next/router'\r\nconst LoginPage = dynamic(() => import(\"./login\"));\r\nimport Link from 'next/link'\r\nimport {FirebaseContext} from '../firebase' // context\r\nimport cardPlanta from '../components/Dinamicos/cardPlanta';\r\n\r\nconst Perfil = () => {\r\n  // Context de firebase\r\n  const {usuario,firebase} = useContext(FirebaseContext);\r\n  // enrutador\r\n  const router = useRouter();\r\n  //State\r\n  const [cultivos, setCultivos] = useState([]);\r\n  // query de cultivos\r\n  useEffect(() => {\r\n    if(usuario){\r\n      console.log(\"entra para query\", usuario.uid);\r\n      const obtenerCultivos = () =>{\r\n        firebase.db.collection('cultivos').where('creador.id', '==', usuario.uid).onSnapshot(manejarSnapShot)\r\n      }\r\n      obtenerCultivos();\r\n    }\r\n    \r\n  }, [usuario]);\r\n  // snapshot\r\n  function manejarSnapShot (snapshot){\r\n    const cultivos = snapshot.docs.map(doc => {\r\n      return {\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      };\r\n    });\r\n    // enviar el resultado de la conultaal state\r\n    setCultivos(cultivos);\r\n    console.log(\"CULTIVOS : \", cultivos);\r\n  }\r\n  if (usuario){\r\n    return (\r\n      <>\r\n        <Layaout>\r\n          {usuario && \r\n            (\r\n   <div className=\"container\">\r\n              <div className=\"row justify-content-md-center\">\r\n                   <div className=\"col-md-auto usuario\">\r\n                       <div className=\"icono\"> \r\n                           <img src=\"static/imgs/usuario.png\" alt=\"\"/>\r\n                       </div>\r\n                   </div>\r\n             </div>\r\n             <div className=\"row justify-content-md-center\">\r\n               <h4 className=\"col-md-auto planta\"><strong>{usuario.displayName}</strong></h4>\r\n             </div>\r\n             <div className=\"row justify-content-md-center agrega\">\r\n             <Link className=\"col-md-auto\" href=\"/agregaNuevo-cultivo\" >\r\n                    <button \r\n                      type=\"button\" \r\n                      value= \"nuevo-cultivo\"\r\n                      className=\"btn btn-primary \"\r\n                    >Agregar Cultivo</button>\r\n               </Link>\r\n             </div>\r\n          \r\n           <br /><hr className=\"linea-separada\" /><br />\r\n         \r\n            <div class=\"row justify-content-md-center\">\r\n                 <h1 className=\"col-md-auto planta\"><b>Tus Cultivos</b></h1>\r\n            </div>\r\n       \r\n            <div id=\"interior\" className=\"row\">\r\n                    {cultivos.map(element =>(\r\n                      <CardCultivo //states\r\n                        key = {element.id}\r\n                        cultivo = {element}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n          </div>\r\n            )\r\n            \r\n          }\r\n        </Layaout>\r\n      </>  \r\n    );\r\n  }\r\n  else{\r\n    //return router.push('/login');  // enrutador \r\n    return  <LoginPage/>;\r\n  }\r\n\r\n    \r\n}\r\n\r\nexport default Perfil"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AADA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AALA;AAAA;AAAA;AACA;AACA;AAMA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAcA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;;;;A","sourceRoot":""}