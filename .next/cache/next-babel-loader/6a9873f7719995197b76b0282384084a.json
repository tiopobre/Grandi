{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Daniel Serrano\\\\Documents\\\\Grandi\\\\pages\\\\Nuevo-cultivo.jsx\";\n\nvar __jsx = React.createElement;\nimport React, { useState, useContext } from 'react';\nimport Layaout from '../components/Layaout/layaout';\nimport Router from 'next/router';\nimport firebase from '../firebase'; // para añadir imagenes\n\nimport FileUploader from 'react-firebase-file-uploader'; //validaciones\n\nimport useValidacion from '../hooks/useValidacion';\nimport validarNuevoCultivo from '../validacion/validarNuevoCultivo';\nimport { FirebaseContext } from '../firebase'; // context\n// State Inicial\n\nvar STATE_INICIAL = {\n  planta: '',\n  alias: '',\n  fechaIni: '',\n  descripcion: '',\n  imagen: ''\n};\n\nvar nuevoCultivo = function nuevoCultivo() {\n  // State Imagenes\n  var _useState = useState(''),\n      nombreImagen = _useState[0],\n      setNombreImagen = _useState[1];\n\n  var _useState2 = useState(false),\n      subiendo = _useState2[0],\n      setSubiendo = _useState2[1];\n\n  var _useState3 = useState(0),\n      progreso = _useState3[0],\n      setProgreso = _useState3[1];\n\n  var _useState4 = useState(''),\n      urliImagen = _useState4[0],\n      setUrlImagen = _useState4[1];\n\n  var _useValidacion = useValidacion(STATE_INICIAL, validarNuevoCultivo, agregarCultivo),\n      valores = _useValidacion.valores,\n      errores = _useValidacion.errores,\n      handleChange = _useValidacion.handleChange,\n      handleSubmit = _useValidacion.handleSubmit;\n\n  var planta = valores.planta,\n      alias = valores.alias,\n      fechaIni = valores.fechaIni,\n      descripcion = valores.descripcion;\n\n  var handleUploadStart = function handleUploadStart() {\n    setProgreso(0);\n    setSubiendo(true);\n  };\n\n  var handleProgress = function handleProgress(progress) {\n    return _this.setState({\n      progreso: progreso\n    });\n  };\n\n  var handleUploadError = function handleUploadError(error) {\n    {\n      setSubiendo(error);\n      console.error(error);\n    }\n    ;\n    console.error(error);\n  };\n\n  var handleUploadSuccess = function handleUploadSuccess(filename) {\n    return _regeneratorRuntime.async(function handleUploadSuccess$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setProgreso(100);\n            setSubiendo(false);\n            setNombreImagen(nombreImagen);\n            firebase.storage().ref(\"cultivos\").child(nombre).getDownloadURL().then(function (url) {\n              console.log(urliImagen);\n              setUrlImagen(urliImagen);\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }; // context con las crud de firebase\n\n\n  var _useContext = useContext(FirebaseContext),\n      usuario = _useContext.usuario,\n      firebase = _useContext.firebase;\n\n  function agregarCultivo() {\n    var cultivo;\n    return _regeneratorRuntime.async(function agregarCultivo$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log('agregando cultivo...');\n\n            if (usuario) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", Router.push('/login'));\n\n          case 3:\n            // Crear cultivo\n            cultivo = {\n              planta: {\n                planta: planta\n              },\n              alias: {\n                alias: alias\n              },\n              fechaIni: {\n                fechaIni: fechaIni\n              },\n              descripcion: {\n                descripcion: descripcion\n              },\n              imagen: '',\n              comentarios: [],\n              votos: 0\n            }; //insertar en la base de datos\n\n            firebase.db.collection('cultivos').add(cultivo);\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Layaout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, __jsx(\"h2\", {\n    className: \"d-flex justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, \"Nueo Cultivo\"), __jsx(\"div\", {\n    className: \"d-flex flex-row bd-highligh justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 23\n    }\n  }, __jsx(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }, \"Planta\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    name: \"planta\",\n    placeholder: \"Tipo de planta\",\n    value: planta,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }), errores.planta && __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 48\n    }\n  }, errores.planta)), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 29\n    }\n  }, \"Alias\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    name: \"alias\",\n    placeholder: \"alias de tu planta\",\n    value: alias,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  }), __jsx(\"small\", {\n    className: \"form-text text-muted\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }, \"Dale un alias a tu cultivo.\")), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }, \"Descripcion Cultivo\"), __jsx(FileUploader, {\n    accept: \"image*/*\",\n    name: \"imagen\",\n    value: imagen,\n    onChange: handleChange,\n    randomizeFilename: true,\n    storageRef: firebase.storage().ref(\"images\"),\n    onUploadStart: handleUploadStart,\n    onUploadError: handleUploadError,\n    onUploadSuccess: handleUploadSuccess,\n    onProgress: handleProgress,\n    multiple: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 29\n    }\n  }, \"Fecha Inicial\"), __jsx(\"input\", {\n    type: \"date\",\n    className: \"form-control\",\n    name: \"fechaIni\",\n    value: fechaIni,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 29\n    }\n  }), errores.fechaIni && __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 50\n    }\n  }, errores.fechaIni)), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 29\n    }\n  }, \"Descripcion Cultivo\"), __jsx(\"input\", {\n    className: \"form-control\",\n    name: \"descripcion\",\n    value: descripcion,\n    onChange: handleChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 29\n    }\n  })), __jsx(\"button\", {\n    type: \"submit\",\n    value: \"crear cultivo\",\n    className: \"btn btn-lg btn-primary btn-block btn-signin\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, \"Agregar Cultivo\")))));\n};\n\nexport default nuevoCultivo;","map":{"version":3,"sources":["C:/Users/Daniel Serrano/Documents/Grandi/pages/Nuevo-cultivo.jsx"],"names":["React","useState","useContext","Layaout","Router","firebase","FileUploader","useValidacion","validarNuevoCultivo","FirebaseContext","STATE_INICIAL","planta","alias","fechaIni","descripcion","imagen","nuevoCultivo","nombreImagen","setNombreImagen","subiendo","setSubiendo","progreso","setProgreso","urliImagen","setUrlImagen","agregarCultivo","valores","errores","handleChange","handleSubmit","handleUploadStart","handleProgress","progress","setState","handleUploadError","error","console","handleUploadSuccess","filename","storage","ref","child","nombre","getDownloadURL","then","url","log","usuario","push","cultivo","comentarios","votos","db","collection","add"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport Layaout from '../components/Layaout/layaout'\r\nimport Router from 'next/router'\r\nimport firebase from '../firebase';\r\n// para añadir imagenes\r\nimport FileUploader from 'react-firebase-file-uploader'\r\n//validaciones\r\nimport useValidacion from '../hooks/useValidacion'\r\nimport validarNuevoCultivo from '../validacion/validarNuevoCultivo'\r\nimport {FirebaseContext} from '../firebase' // context\r\n// State Inicial\r\nconst STATE_INICIAL = {\r\n    planta: '',\r\n    alias: '',\r\n    fechaIni: '',\r\n    descripcion: '',\r\n    imagen : '',\r\n}\r\n\r\nconst nuevoCultivo = () => {\r\n    // State Imagenes\r\n    const [nombreImagen, setNombreImagen] = useState('');\r\n    const [subiendo, setSubiendo] = useState(false);\r\n    const [progreso, setProgreso] = useState(0);\r\n    const [urliImagen,setUrlImagen] = useState ('')\r\n\r\n    const {valores, errores, handleChange, handleSubmit} =  useValidacion(STATE_INICIAL, validarNuevoCultivo, agregarCultivo);\r\n    const {planta, alias, fechaIni, descripcion } = valores;\r\n    \r\n    const handleUploadStart = () =>{\r\n        setProgreso(0);\r\n        setSubiendo(true);\r\n    }\r\n\r\n    const handleProgress = progress => this.setState({progreso});\r\n    \r\n    const handleUploadError = error => {{\r\n        setSubiendo(error);\r\n        console.error(error);\r\n      };\r\n      console.error(error);\r\n    };\r\n  \r\n    const handleUploadSuccess = async filename => {\r\n        setProgreso(100);\r\n        setSubiendo(false);\r\n        setNombreImagen(nombreImagen)\r\n      firebase\r\n        .storage()\r\n        .ref(\"cultivos\")\r\n        .child(nombre)\r\n        .getDownloadURL()\r\n        .then(url =>{ \r\n            console.log(urliImagen);\r\n            setUrlImagen(urliImagen);\r\n        });    \r\n    };\r\n    // context con las crud de firebase\r\n    const {usuario, firebase} = useContext(FirebaseContext);\r\n    \r\n    async function agregarCultivo(){\r\n            console.log('agregando cultivo...')\r\n            if(!usuario){\r\n                return Router.push('/login');\r\n            }\r\n            // Crear cultivo\r\n            const cultivo = {\r\n                planta: {planta},\r\n                alias: {alias},\r\n                fechaIni: {fechaIni},\r\n                descripcion: {descripcion},\r\n                imagen: '',\r\n                comentarios: [],\r\n                votos: 0\r\n            }\r\n            //insertar en la base de datos\r\n            firebase.db.collection('cultivos').add(cultivo);\r\n        }\r\n\r\n    return ( \r\n        <>\r\n            <Layaout>\r\n                <h2  className=\"d-flex justify-content-center\">Nueo Cultivo</h2>\r\n                <div className=\"d-flex flex-row bd-highligh justify-content-center\">\r\n                    <form \r\n                        onSubmit = {handleSubmit}\r\n                    >\r\n                      <div className=\"form-group\">\r\n                            <label >Planta</label>\r\n                            <input \r\n                                type=\"text\" \r\n                                className=\"form-control\" \r\n                                name = \"planta\"\r\n                                placeholder=\"Tipo de planta\"\r\n                                value = {planta}\r\n                                onChange ={handleChange}\r\n                            />\r\n                            {errores.planta && <p>{errores.planta}</p>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label >Alias</label>\r\n                            <input \r\n                                type=\"text\" \r\n                                className=\"form-control\" \r\n                                name = \"alias\"\r\n                                placeholder=\"alias de tu planta\"  \r\n                                value = {alias}\r\n                                onChange ={handleChange}\r\n                            />\r\n                            <small \r\n                             \r\n                            className=\"form-text text-muted\"\r\n                            >Dale un alias a tu cultivo.</small>\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label >Descripcion Cultivo</label>\r\n                            <FileUploader \r\n                                accept =\"image*/*\"\r\n                                name = \"imagen\"\r\n                                value = {imagen}\r\n                                onChange ={handleChange}\r\n                                randomizeFilename\r\n                                storageRef={firebase.storage().ref(\"images\")}\r\n                                onUploadStart={handleUploadStart}\r\n                                onUploadError={handleUploadError}\r\n                                onUploadSuccess={handleUploadSuccess}\r\n                                onProgress={handleProgress}\r\n                                multiple\r\n\r\n                            />  \r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label >Fecha Inicial</label>\r\n                            <input \r\n                                type=\"date\" \r\n                                className=\"form-control\" \r\n                                name = \"fechaIni\"\r\n                                value = {fechaIni}\r\n                                onChange ={handleChange}\r\n                            />  \r\n                            {errores.fechaIni && <p>{errores.fechaIni}</p>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label >Descripcion Cultivo</label>\r\n                            <input \r\n                                className=\"form-control\" \r\n                                name = \"descripcion\"\r\n                                value = {descripcion}\r\n                                onChange ={handleChange}\r\n                            />  \r\n                        </div>\r\n                        <button \r\n                            type=\"submit\" \r\n                            value= \"crear cultivo\"\r\n                            className=\"btn btn-lg btn-primary btn-block btn-signin\"\r\n                        >Agregar Cultivo</button>  \r\n                    </form> \r\n                </div>\r\n            </Layaout> \r\n        </>\r\n     );\r\n}\r\n \r\nexport default nuevoCultivo;"]},"metadata":{},"sourceType":"module"}