{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Daniel Serrano\\\\Documents\\\\Grandi\\\\pages\\\\Nuevo-cultivo.jsx\";\nvar __jsx = React.createElement;\nimport React, { useState, useContext } from 'react';\nimport Layaout from '../components/Layaout/layaout';\nimport Router from 'next/router';\nimport firebase from '../firebase'; // para aÃ±adir imagenes\n//validaciones\n\nimport useValidacion from '../hooks/useValidacion';\nimport validarNuevoCultivo from '../validacion/validarNuevoCultivo';\nimport { FirebaseContext } from '../firebase'; // context\n// State Inicial\n\nconst STATE_INICIAL = {\n  planta: '',\n  alias: '',\n  fechaIni: '',\n  descripcion: '',\n  img: '',\n  urlImg: '',\n  votos: 0\n};\n\nconst nuevoCultivo = () => {\n  // State Imagenes\n  const {\n    0: imagen,\n    1: setImagen\n  } = useState(null);\n  const {\n    valores,\n    errores,\n    handleChange,\n    handleSubmit\n  } = useValidacion(STATE_INICIAL, validarNuevoCultivo, agregarCultivo);\n  const {\n    planta,\n    alias,\n    fechaIni,\n    img,\n    urlImg,\n    descripcion\n  } = valores; // context con las crud de firebase\n\n  const {\n    usuario,\n    firebase\n  } = useContext(FirebaseContext);\n\n  const handleUploadStart = () => {\n    setProgreso(0);\n    setSubiendo(true);\n  }; // agregar a firestore y storage\n\n\n  async function agregarCultivo() {\n    console.log('agregando cultivo...');\n\n    if (!usuario) {\n      return Router.push('/login');\n    } // Crear cultivo\n\n\n    const cultivo = {\n      planta: {\n        planta\n      },\n      alias: {\n        alias\n      },\n      fechaIni: {\n        fechaIni\n      },\n      descripcion: {\n        descripcion\n      },\n      urlImg: {\n        urlImagen\n      },\n      comentarios: [],\n      votos: 0\n    }; //insertar en la base de datos\n\n    firebase.db.collection('cultivos').add(cultivo); //firebase.storage.ref(\"test_imagenes\");\n    //handleUploadSuccess();\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Layaout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, __jsx(\"h2\", {\n    className: \"d-flex justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, \"Nueo Cultivo\"), __jsx(\"div\", {\n    className: \"d-flex flex-row bd-highligh justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 23\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, \"Planta\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    name: \"planta\",\n    placeholder: \"Tipo de planta\",\n    value: planta,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }), errores.planta && __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 48\n    }\n  }, errores.planta)), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 29\n    }\n  }, \"Alias\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    name: \"alias\",\n    placeholder: \"alias de tu planta\",\n    value: alias,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 29\n    }\n  }), __jsx(\"small\", {\n    className: \"form-text text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }, \"Dale un alias a tu cultivo.\")), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 29\n    }\n  }, \"Sube una Imagen\"), __jsx(\"input\", {\n    type: \"file\",\n    accept: \"image*/*\",\n    name: \"imagen\",\n    randomizeFilename: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  }, \"Fecha Inicial\"), __jsx(\"input\", {\n    type: \"date\",\n    className: \"form-control\",\n    name: \"fechaIni\",\n    value: fechaIni,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  }), errores.fechaIni && __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 50\n    }\n  }, errores.fechaIni)), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }, \"Descripcion Cultivo\"), __jsx(\"input\", {\n    className: \"form-control\",\n    name: \"descripcion\",\n    value: descripcion,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  })), __jsx(\"button\", {\n    type: \"submit\",\n    value: \"crear cultivo\",\n    className: \"btn btn-lg btn-primary btn-block btn-signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  }, \"Agregar Cultivo\")))));\n};\n\nexport default nuevoCultivo;","map":{"version":3,"sources":["C:/Users/Daniel Serrano/Documents/Grandi/pages/Nuevo-cultivo.jsx"],"names":["React","useState","useContext","Layaout","Router","firebase","useValidacion","validarNuevoCultivo","FirebaseContext","STATE_INICIAL","planta","alias","fechaIni","descripcion","img","urlImg","votos","nuevoCultivo","imagen","setImagen","valores","errores","handleChange","handleSubmit","agregarCultivo","usuario","handleUploadStart","setProgreso","setSubiendo","console","log","push","cultivo","urlImagen","comentarios","db","collection","add"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport Layaout from '../components/Layaout/layaout'\r\nimport Router from 'next/router'\r\nimport firebase from '../firebase';\r\n// para aÃ±adir imagenes\r\n\r\n//validaciones\r\nimport useValidacion from '../hooks/useValidacion'\r\nimport validarNuevoCultivo from '../validacion/validarNuevoCultivo'\r\nimport {FirebaseContext} from '../firebase' // context\r\n// State Inicial\r\nconst STATE_INICIAL = {\r\n    planta: '',\r\n    alias: '',\r\n    fechaIni: '',\r\n    descripcion: '',\r\n    img: '',\r\n    urlImg:'',\r\n    votos : 0,\r\n}\r\n\r\nconst nuevoCultivo = () => {\r\n    // State Imagenes\r\n    const [imagen, setImagen] = useState(null);\r\n\r\n\r\n    const {valores, errores, handleChange, handleSubmit} =  useValidacion(STATE_INICIAL, validarNuevoCultivo, agregarCultivo);\r\n    const {planta, alias, fechaIni,img ,urlImg , descripcion } = valores;\r\n    // context con las crud de firebase\r\n    const {usuario, firebase} = useContext(FirebaseContext);\r\n    \r\n    const handleUploadStart = () =>{\r\n        setProgreso(0);\r\n        setSubiendo(true);\r\n    }\r\n\r\n    // agregar a firestore y storage\r\n    async function agregarCultivo(){\r\n            console.log('agregando cultivo...')\r\n            if(!usuario){\r\n                return Router.push('/login');\r\n            }\r\n            // Crear cultivo\r\n            const cultivo = {\r\n                planta: {planta},\r\n                alias: {alias},\r\n                fechaIni: {fechaIni},\r\n                descripcion: {descripcion},\r\n                urlImg: {urlImagen},\r\n                comentarios: [],\r\n                votos: 0\r\n            }\r\n            //insertar en la base de datos\r\n            firebase.db.collection('cultivos').add(cultivo);\r\n            //firebase.storage.ref(\"test_imagenes\");\r\n            //handleUploadSuccess();\r\n        }\r\n\r\n    return ( \r\n        <>\r\n            <Layaout>\r\n                <h2  className=\"d-flex justify-content-center\">Nueo Cultivo</h2>\r\n                <div className=\"d-flex flex-row bd-highligh justify-content-center\">\r\n                    <form \r\n                        onSubmit = {handleSubmit}\r\n                    >\r\n                      <div className=\"form-group\">\r\n                            <label >Planta</label>\r\n                            <input \r\n                                type=\"text\" \r\n                                className=\"form-control\" \r\n                                name = \"planta\"\r\n                                placeholder=\"Tipo de planta\"\r\n                                value = {planta}\r\n                                onChange ={handleChange}\r\n                            />\r\n                            {errores.planta && <p>{errores.planta}</p>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label >Alias</label>\r\n                            <input \r\n                                type=\"text\" \r\n                                className=\"form-control\" \r\n                                name = \"alias\"\r\n                                placeholder=\"alias de tu planta\"  \r\n                                value = {alias}\r\n                                onChange ={handleChange}\r\n                            />\r\n                            <small \r\n                             \r\n                            className=\"form-text text-muted\"\r\n                            >Dale un alias a tu cultivo.</small>\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label >Sube una Imagen</label>\r\n                            <input \r\n                                type = \"file\"\r\n                                accept =\"image*/*\"\r\n                                name = \"imagen\"\r\n                                \r\n                                randomizeFilename\r\n                            />  \r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label >Fecha Inicial</label>\r\n                            <input \r\n                                type=\"date\" \r\n                                className=\"form-control\" \r\n                                name = \"fechaIni\"\r\n                                value = {fechaIni}\r\n                                onChange ={handleChange}\r\n                            />  \r\n                            {errores.fechaIni && <p>{errores.fechaIni}</p>}\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label >Descripcion Cultivo</label>\r\n                            <input \r\n                                className=\"form-control\" \r\n                                name = \"descripcion\"\r\n                                value = {descripcion}\r\n                                onChange ={handleChange}\r\n                            />  \r\n                        </div>\r\n                        <button \r\n                            type=\"submit\" \r\n                            value= \"crear cultivo\"\r\n                            className=\"btn btn-lg btn-primary btn-block btn-signin\"\r\n                        >Agregar Cultivo</button>  \r\n                    </form> \r\n                </div>\r\n            </Layaout> \r\n        </>\r\n     );\r\n}\r\n \r\nexport default nuevoCultivo;"]},"metadata":{},"sourceType":"module"}